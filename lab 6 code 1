<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–ª–∞—Å Lorry (–í–∞–Ω—Ç–∞–∂—ñ–≤–∫–∞) - –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—è</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0c2461, #1e3799);
            min-height: 100vh;
            color: #333;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            padding: 40px 20px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        h1 {
            color: #2c3e50;
            font-size: 2.8em;
            margin-bottom: 15px;
            background: linear-gradient(45deg, #e74c3c, #c0392b);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .subtitle {
            color: #7f8c8d;
            font-size: 1.2em;
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.6;
        }

        .lorries-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(450px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }

        .lorry-card {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            border: 3px solid transparent;
        }

        .lorry-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
        }

        .lorry-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(90deg, #e74c3c, #c0392b);
        }

        .lorry-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f0f0f0;
        }

        .lorry-title {
            font-size: 1.8em;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .lorry-icon {
            font-size: 2em;
        }

        .lorry-id {
            background: #f1f2f6;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9em;
            color: #7f8c8d;
        }

        .lorry-info {
            margin-bottom: 25px;
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }

        .info-item {
            padding: 15px;
            background: #f8f9fa;
            border-radius: 12px;
            border-left: 4px solid #e74c3c;
        }

        .info-label {
            font-size: 0.9em;
            color: #7f8c8d;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .info-value {
            font-size: 1.2em;
            font-weight: bold;
            color: #2c3e50;
        }

        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }

        .status-active {
            background: #2ecc71;
            box-shadow: 0 0 10px #2ecc71;
        }

        .status-inactive {
            background: #e74c3c;
            box-shadow: 0 0 10px #e74c3c;
        }

        .status-moving {
            background: #3498db;
            box-shadow: 0 0 10px #3498db;
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        .controls {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-top: 25px;
        }

        .btn {
            padding: 12px;
            border: none;
            border-radius: 10px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9em;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 7px 15px rgba(0,0,0,0.2);
        }

        .btn-primary {
            background: linear-gradient(45deg, #3498db, #2980b9);
            color: white;
        }

        .btn-secondary {
            background: linear-gradient(45deg, #2ecc71, #27ae60);
            color: white;
        }

        .btn-warning {
            background: linear-gradient(45deg, #f39c12, #e67e22);
            color: white;
        }

        .btn-danger {
            background: linear-gradient(45deg, #e74c3c, #c0392b);
            color: white;
        }

        .btn-special {
            background: linear-gradient(45deg, #9b59b6, #8e44ad);
            color: white;
        }

        .control-panel {
            background: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 20px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .control-panel h2 {
            color: #2c3e50;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f0f0f0;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #2c3e50;
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1em;
            transition: border-color 0.3s;
        }

        .form-group input:focus,
        .form-group select:focus {
            border-color: #3498db;
            outline: none;
        }

        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .stat-card {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(231, 76, 60, 0.3);
        }

        .stat-value {
            font-size: 2.5em;
            font-weight: bold;
            margin: 10px 0;
        }

        .stat-label {
            font-size: 0.9em;
            opacity: 0.9;
        }

        .console {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 20px;
            border-radius: 12px;
            font-family: 'Courier New', monospace;
            height: 300px;
            overflow-y: auto;
            margin-top: 20px;
        }

        .log-entry {
            padding: 10px;
            border-bottom: 1px solid #34495e;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .log-time {
            color: #95a5a6;
            margin-right: 15px;
        }

        .log-info { color: #3498db; }
        .log-success { color: #2ecc71; }
        .log-warning { color: #f39c12; }
        .log-error { color: #e74c3c; }

        .lorry-visual {
            position: relative;
            height: 150px;
            background: #f8f9fa;
            border-radius: 10px;
            margin: 20px 0;
            overflow: hidden;
            border: 2px solid #ddd;
        }

        .lorry-body {
            position: absolute;
            top: 50%;
            left: 20%;
            width: 200px;
            height: 60px;
            background: #e74c3c;
            border-radius: 10px;
            transform: translateY(-50%);
            transition: left 0.5s ease;
        }

        .lorry-cabin {
            position: absolute;
            top: 50%;
            left: calc(20% + 180px);
            width: 60px;
            height: 70px;
            background: #c0392b;
            border-radius: 5px;
            transform: translateY(-50%);
        }

        .lorry-wheels {
            position: absolute;
            bottom: 10px;
            width: 30px;
            height: 30px;
            background: #2c3e50;
            border-radius: 50%;
        }

        .wheel-1 { left: calc(20% + 20px); }
        .wheel-2 { left: calc(20% + 170px); }
        .wheel-3 { left: calc(20% + 210px); }

        .cargo-visual {
            position: absolute;
            top: 50%;
            left: 20%;
            width: 180px;
            height: 50px;
            background: #f39c12;
            border-radius: 5px;
            transform: translateY(-50%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 0.9em;
        }

        .empty-cargo {
            background: #bdc3c7;
            color: #7f8c8d;
        }

        .progress-bar {
            height: 10px;
            background: #ecf0f1;
            border-radius: 5px;
            margin: 10px 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #2ecc71, #27ae60);
            transition: width 0.3s ease;
        }

        .fuel-bar {
            background: linear-gradient(90deg, #e74c3c, #c0392b);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üöö –ö–ª–∞—Å Lorry (–í–∞–Ω—Ç–∞–∂—ñ–≤–∫–∞)</h1>
            <p class="subtitle">–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—è –æ–±'—î–∫—Ç–Ω–æ-–æ—Ä—ñ—î–Ω—Ç–æ–≤–∞–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—è –∑ –ø—Ä–∏–≤–∞—Ç–Ω–∏–º —Ç–∞ –ø—É–±–ª—ñ—á–Ω–∏–º–∏ –ø–æ–ª—è–º–∏ —Ç–∞ –º–µ—Ç–æ–¥–∞–º–∏</p>
        </div>

        <div class="control-panel">
            <h2>‚öôÔ∏è –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–æ—ó –≤–∞–Ω—Ç–∞–∂—ñ–≤–∫–∏</h2>
            <div class="form-row">
                <div class="form-group">
                    <label for="brand">–ú–∞—Ä–∫–∞:</label>
                    <input type="text" id="brand" placeholder="–ù–∞–ø—Ä–∏–∫–ª–∞–¥: Volvo" value="Volvo">
                </div>
                <div class="form-group">
                    <label for="model">–ú–æ–¥–µ–ª—å:</label>
                    <input type="text" id="model" placeholder="–ù–∞–ø—Ä–∏–∫–ª–∞–¥: FH16" value="FH16">
                </div>
                <div class="form-group">
                    <label for="maxLoad">–ú–∞–∫—Å. –≤–∞–Ω—Ç–∞–∂ (—Ç–æ–Ω–Ω):</label>
                    <input type="number" id="maxLoad" min="1" max="50" value="20">
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="fuelCapacity">–Ñ–º–Ω—ñ—Å—Ç—å –±–∞–∫–∞ (–ª):</label>
                    <input type="number" id="fuelCapacity" min="100" max="1000" value="500">
                </div>
                <div class="form-group">
                    <label for="year">–†—ñ–∫ –≤–∏–ø—É—Å–∫—É:</label>
                    <input type="number" id="year" min="2000" max="2024" value="2020">
                </div>
                <div class="form-group">
                    <label for="licensePlate">–ù–æ–º–µ—Ä–Ω–∏–π –∑–Ω–∞–∫:</label>
                    <input type="text" id="licensePlate" placeholder="–ù–∞–ø—Ä–∏–∫–ª–∞–¥: AA 1234 BB" value="AA 1234 BB">
                </div>
            </div>
            
            <button class="btn btn-primary" onclick="createNewLorry()" style="width: 100%; padding: 15px; margin-top: 20px;">
                üöö –°—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–æ–≤—É –≤–∞–Ω—Ç–∞–∂—ñ–≤–∫—É
            </button>
        </div>

        <div id="lorriesContainer" class="lorries-container">
        </div>

        <div class="control-panel">
            <h2>üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ñ–ª–æ—Ç—É</h2>
            <div class="stats-grid">
                <div class="stat-card" style="background: linear-gradient(135deg, #3498db, #2980b9);">
                    <div class="stat-value" id="totalLorries">0</div>
                    <div class="stat-label">–í—Å—å–æ–≥–æ –≤–∞–Ω—Ç–∞–∂—ñ–≤–æ–∫</div>
                </div>
                <div class="stat-card" style="background: linear-gradient(135deg, #2ecc71, #27ae60);">
                    <div class="stat-value" id="totalCargo">0</div>
                    <div class="stat-label">–ó–∞–≥–∞–ª—å–Ω–∏–π –≤–∞–Ω—Ç–∞–∂ (—Ç–æ–Ω–Ω)</div>
                </div>
                <div class="stat-card" style="background: linear-gradient(135deg, #f39c12, #e67e22);">
                    <div class="stat-value" id="movingLorries">0</div>
                    <div class="stat-label">–í –¥–æ—Ä–æ–∑—ñ</div>
                </div>
                <div class="stat-card" style="background: linear-gradient(135deg, #9b59b6, #8e44ad);">
                    <div class="stat-value" id="totalDistance">0</div>
                    <div class="stat-label">–ü—Ä–æ–π–¥–µ–Ω–æ –∫–º</div>
                </div>
            </div>
        </div>

        <div class="control-panel">
            <h2>üìù –ñ—É—Ä–Ω–∞–ª –ø–æ–¥—ñ–π</h2>
            <div id="console" class="console">
            </div>
        </div>
    </div>

    <script>
        class Lorry {
            #id; 
            #vin; 
            #mileage = 0; 
            
            constructor(brand, model, maxLoad, fuelCapacity, year, licensePlate) {
                this.#id = Date.now() + Math.random();
                this.#vin = this.#generateVIN();
                
                this.brand = brand;
                this.model = model;
                this.maxLoad = maxLoad; 
                this.fuelCapacity = fuelCapacity; 
                this.year = year;
                this.licensePlate = licensePlate;
                
                this.currentLoad = 0; 
                this.currentFuel = fuelCapacity; 
                this.isEngineOn = false;
                this.isMoving = false;
                this.currentSpeed = 0;
                this.location = "–ë–∞–∑–∞";
                this.destination = "";
                this.maintenanceRequired = false;
                this.lastMaintenance = new Date();
                
                this.logEvent(`–í–∞–Ω—Ç–∞–∂—ñ–≤–∫–∞ ${this.brand} ${this.model} —Å—Ç–≤–æ—Ä–µ–Ω–∞`);
            }
            
            #generateVIN() {
                const chars = 'ABCDEFGHJKLMNPRSTUVWXYZ0123456789';
                let vin = '';
                for (let i = 0; i < 17; i++) {
                    vin += chars.charAt(Math.floor(Math.random() * chars.length));
                }
                return vin;
            }
            
            
            startEngine() {
                if (this.isEngineOn) {
                    this.logEvent(`–î–≤–∏–≥—É–Ω –≤–∂–µ –∑–∞–≤–µ–¥–µ–Ω–∏–π`, 'warning');
                    return false;
                }
                
                if (this.currentFuel <= 0) {
                    this.logEvent(`–ù–µ–º–∞—î –ø–∞–ª–∏–≤–∞! –ù–µ–º–æ–∂–ª–∏–≤–æ –∑–∞–≤–µ—Å—Ç–∏ –¥–≤–∏–≥—É–Ω`, 'error');
                    return false;
                }
                
                this.isEngineOn = true;
                this.logEvent(`–î–≤–∏–≥—É–Ω –∑–∞–≤–µ–¥–µ–Ω–æ`);
                return true;
            }
            
            stopEngine() {
                if (!this.isEngineOn) {
                    this.logEvent(`–î–≤–∏–≥—É–Ω –≤–∂–µ –∑–∞–≥–ª—É—à–µ–Ω–æ`, 'warning');
                    return false;
                }
                
                if (this.isMoving) {
                    this.logEvent(`–ù–µ–º–æ–∂–ª–∏–≤–æ –∑–∞–≥–ª—É—à–∏—Ç–∏ –¥–≤–∏–≥—É–Ω –ø—ñ–¥ —á–∞—Å —Ä—É—Ö—É!`, 'error');
                    return false;
                }
                
                this.isEngineOn = false;
                this.currentSpeed = 0;
                this.logEvent(`–î–≤–∏–≥—É–Ω –∑–∞–≥–ª—É—à–µ–Ω–æ`);
                return true;
            }
            
            startMoving(destination, speed = 60) {
                if (!this.isEngineOn) {
                    this.logEvent(`–°–ø–æ—á–∞—Ç–∫—É –∑–∞–≤–µ–¥—ñ—Ç—å –¥–≤–∏–≥—É–Ω!`, 'error');
                    return false;
                }
                
                if (this.isMoving) {
                    this.logEvent(`–í–∞–Ω—Ç–∞–∂—ñ–≤–∫–∞ –≤–∂–µ –≤ –¥–æ—Ä–æ–∑—ñ`, 'warning');
                    return false;
                }
                
                if (this.currentFuel <= this.fuelCapacity * 0.1) {
                    this.logEvent(`–ó–∞–º–∞–ª–æ –ø–∞–ª–∏–≤–∞ –¥–ª—è –ø–æ—á–∞—Ç–∫—É —Ä—É—Ö—É!`, 'error');
                    return false;
                }
                
                this.isMoving = true;
                this.currentSpeed = speed;
                this.destination = destination;
                this.logEvent(`–ü–æ—á–∞—Ç–æ–∫ —Ä—É—Ö—É –¥–æ "${destination}" –∑—ñ —à–≤–∏–¥–∫—ñ—Å—Ç—é ${speed} –∫–º/–≥–æ–¥`);
                return true;
            }
            
            stopMoving() {
                if (!this.isMoving) {
                    this.logEvent(`–í–∞–Ω—Ç–∞–∂—ñ–≤–∫–∞ –≤–∂–µ –∑—É–ø–∏–Ω–µ–Ω–∞`, 'warning');
                    return false;
                }
                
                this.isMoving = false;
                this.currentSpeed = 0;
                this.location = this.destination;
                this.destination = "";
                this.logEvent(`–ü—Ä–∏–±—É–ª–∏ –¥–æ "${this.location}"`);
                return true;
            }
            
            loadCargo(weight) {
                if (this.isMoving) {
                    this.logEvent(`–ù–µ–º–æ–∂–ª–∏–≤–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –≤–∞–Ω—Ç–∞–∂ –ø—ñ–¥ —á–∞—Å —Ä—É—Ö—É!`, 'error');
                    return false;
                }
                
                if (this.currentLoad + weight > this.maxLoad) {
                    this.logEvent(`–ü–µ—Ä–µ–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è! –ú–∞–∫—Å–∏–º—É–º: ${this.maxLoad}—Ç`, 'error');
                    return false;
                }
                
                this.currentLoad += weight;
                this.logEvent(`–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ ${weight}—Ç. –ü–æ—Ç–æ—á–Ω–∏–π –≤–∞–Ω—Ç–∞–∂: ${this.currentLoad}/${this.maxLoad}—Ç`);
                return true;
            }
            
            unloadCargo(weight) {
                if (this.isMoving) {
                    this.logEvent(`–ù–µ–º–æ–∂–ª–∏–≤–æ —Ä–æ–∑–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –≤–∞–Ω—Ç–∞–∂ –ø—ñ–¥ —á–∞—Å —Ä—É—Ö—É!`, 'error');
                    return false;
                }
                
                if (this.currentLoad - weight < 0) {
                    this.logEvent(`–ù–µ–¥–æ—Å—Ç–∞—Ç–Ω—å–æ –≤–∞–Ω—Ç–∞–∂—É –¥–ª—è —Ä–æ–∑–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è!`, 'error');
                    return false;
                }
                
                this.currentLoad -= weight;
                this.logEvent(`–†–æ–∑–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ ${weight}—Ç. –ü–æ—Ç–æ—á–Ω–∏–π –≤–∞–Ω—Ç–∞–∂: ${this.currentLoad}/${this.maxLoad}—Ç`);
                return true;
            }
            
            refuel(amount) {
                if (this.isMoving) {
                    this.logEvent(`–ù–µ–º–æ–∂–ª–∏–≤–æ –∑–∞–ø—Ä–∞–≤–∏—Ç–∏ –ø—ñ–¥ —á–∞—Å —Ä—É—Ö—É!`, 'error');
                    return false;
                }
                
                const newFuel = this.currentFuel + amount;
                if (newFuel > this.fuelCapacity) {
                    this.currentFuel = this.fuelCapacity;
                    this.logEvent(`–ë–∞–∫ –∑–∞–ø—Ä–∞–≤–ª–µ–Ω–æ –ø–æ–≤–Ω—ñ—Å—Ç—é: ${this.fuelCapacity}–ª`);
                } else {
                    this.currentFuel = newFuel;
                    this.logEvent(`–ó–∞–ø—Ä–∞–≤–ª–µ–Ω–æ ${amount}–ª. –ü–æ—Ç–æ—á–Ω–µ –ø–∞–ª–∏–≤–æ: ${this.currentFuel}/${this.fuelCapacity}–ª`);
                }
                return true;
            }
            
            performMaintenance() {
                if (this.isMoving) {
                    this.logEvent(`–ù–µ–º–æ–∂–ª–∏–≤–æ –ø—Ä–æ–≤–µ—Å—Ç–∏ –¢–û –ø—ñ–¥ —á–∞—Å —Ä—É—Ö—É!`, 'error');
                    return false;
                }
                
                this.maintenanceRequired = false;
                this.lastMaintenance = new Date();
                this.logEvent(`–¢–µ—Ö–Ω—ñ—á–Ω–µ –æ–±—Å–ª—É–≥–æ–≤—É–≤–∞–Ω–Ω—è –ø—Ä–æ–≤–µ–¥–µ–Ω–æ`);
                return true;
            }
            
            simulateMovement() {
                if (!this.isMoving) return;
                
                const fuelConsumption = (0.1 + (this.currentLoad / this.maxLoad) * 0.2) * (this.currentSpeed / 100);
                this.currentFuel -= fuelConsumption;
                
                this.#mileage += this.currentSpeed / 60; 
                
                if (this.currentFuel <= 0) {
                    this.currentFuel = 0;
                    this.isMoving = false;
                    this.currentSpeed = 0;
                    this.logEvent(`–ó–∞–∫—ñ–Ω—á–∏–ª–æ—Å—å –ø–∞–ª–∏–≤–æ! –í–∞–Ω—Ç–∞–∂—ñ–≤–∫–∞ –∑—É–ø–∏–Ω–µ–Ω–∞`, 'error');
                }
                
                const daysSinceMaintenance = (new Date() - this.lastMaintenance) / (1000 * 60 * 60 * 24);
                if (daysSinceMaintenance > 30 && !this.maintenanceRequired) {
                    this.maintenanceRequired = true;
                    this.logEvent(`–ü–æ—Ç—Ä—ñ–±–Ω–µ —Ç–µ—Ö–Ω—ñ—á–Ω–µ –æ–±—Å–ª—É–≥–æ–≤—É–≤–∞–Ω–Ω—è!`, 'warning');
                }
            }
            
            
            get id() {
                return this.#id;
            }
            
            get vin() {
                return this.#vin;
            }
            
            get mileage() {
                return Math.round(this.#mileage);
            }
            
            get fuelPercentage() {
                return (this.currentFuel / this.fuelCapacity) * 100;
            }
            
            get loadPercentage() {
                return (this.currentLoad / this.maxLoad) * 100;
            }
            
            get age() {
                return new Date().getFullYear() - this.year;
            }
            
            get info() {
                return {
                    brand: this.brand,
                    model: this.model,
                    licensePlate: this.licensePlate,
                    year: this.year,
                    maxLoad: this.maxLoad,
                    currentLoad: this.currentLoad,
                    fuelCapacity: this.fuelCapacity,
                    currentFuel: this.currentFuel,
                    mileage: this.mileage,
                    isEngineOn: this.isEngineOn,
                    isMoving: this.isMoving,
                    currentSpeed: this.currentSpeed,
                    location: this.location,
                    destination: this.destination,
                    maintenanceRequired: this.maintenanceRequired,
                    age: this.age
                };
            }
            
            logEvent(message, type = 'info') {
                const timestamp = new Date().toLocaleTimeString();
                const logEntry = {
                    time: timestamp,
                    lorry: `${this.brand} ${this.model}`,
                    message: message,
                    type: type
                };
                
                addToConsole(logEntry);
            }
        }

        let lorries = [];
        let simulationInterval;

        function createNewLorry() {
            const brand = document.getElementById('brand').value || 'Volvo';
            const model = document.getElementById('model').value || 'FH16';
            const maxLoad = parseFloat(document.getElementById('maxLoad').value) || 20;
            const fuelCapacity = parseFloat(document.getElementById('fuelCapacity').value) || 500;
            const year = parseInt(document.getElementById('year').value) || 2020;
            const licensePlate = document.getElementById('licensePlate').value || 'AA 1234 BB';
            
            const lorry = new Lorry(brand, model, maxLoad, fuelCapacity, year, licensePlate);
            lorries.push(lorry);
            
            renderLorries();
            updateStatistics();
            
            document.getElementById('brand').value = '';
            document.getElementById('model').value = '';
        }

        function renderLorries() {
            const container = document.getElementById('lorriesContainer');
            container.innerHTML = '';
            
            if (lorries.length === 0) {
                container.innerHTML = `
                    <div style="grid-column: 1 / -1; text-align: center; padding: 40px; background: white; border-radius: 20px;">
                        <h3>–©–µ –Ω–µ–º–∞—î –≤–∞–Ω—Ç–∞–∂—ñ–≤–æ–∫</h3>
                        <p style="color: #7f8c8d; margin-top: 10px;">–°—Ç–≤–æ—Ä—ñ—Ç—å –ø–µ—Ä—à—É –≤–∞–Ω—Ç–∞–∂—ñ–≤–∫—É –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –ø–∞–Ω–µ–ª—ñ –∑–≤–µ—Ä—Ö—É</p>
                    </div>
                `;
                return;
            }
            
            lorries.forEach(lorry => {
                const info = lorry.info;
                const card = document.createElement('div');
                card.className = 'lorry-card';
                
                card.innerHTML = `
                    <div class="lorry-header">
                        <div class="lorry-title">
                            <span class="lorry-icon">üöö</span>
                            ${lorry.brand} ${lorry.model}
                        </div>
                        <div class="lorry-id">${lorry.licensePlate}</div>
                    </div>
                    
                    <div class="lorry-info">
                        <div class="info-grid">
                            <div class="info-item">
                                <div class="info-label">–†—ñ–∫</div>
                                <div class="info-value">${lorry.year} (${lorry.age} —Ä–æ–∫—ñ–≤)</div>
                            </div>
                            <div class="info-item">
                                <div class="info-label">–ü—Ä–æ–±—ñ–≥</div>
                                <div class="info-value">${lorry.mileage.toLocaleString()} –∫–º</div>
                            </div>
                            <div class="info-item">
                                <div class="info-label">–°—Ç–∞—Ç—É—Å</div>
                                <div class="info-value">
                                    <span class="status-indicator ${lorry.isMoving ? 'status-moving' : (lorry.isEngineOn ? 'status-active' : 'status-inactive')}"></span>
                                    ${lorry.isMoving ? '–í –¥–æ—Ä–æ–∑—ñ' : (lorry.isEngineOn ? '–ó–∞–≤–µ–¥–µ–Ω–æ' : '–ó–∞–≥–ª—É—à–µ–Ω–æ')}
                                </div>
                            </div>
                            <div class="info-item">
                                <div class="info-label">–®–≤–∏–¥–∫—ñ—Å—Ç—å</div>
                                <div class="info-value">${lorry.currentSpeed} –∫–º/–≥–æ–¥</div>
                            </div>
                            <div class="info-item">
                                <div class="info-label">–ú—ñ—Å—Ü–µ–∑–Ω–∞—Ö–æ–¥–∂–µ–Ω–Ω—è</div>
                                <div class="info-value">${lorry.location}</div>
                            </div>
                            <div class="info-item">
                                <div class="info-label">–ü—É–Ω–∫—Ç –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è</div>
                                <div class="info-value">${lorry.destination || '-'}</div>
                            </div>
                        </div>
                        
                        <!-- –í—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è –≤–∞–Ω—Ç–∞–∂—ñ–≤–∫–∏ -->
                        <div class="lorry-visual">
                            <div class="lorry-body" style="left: ${lorry.isMoving ? '40%' : '20%'};"></div>
                            <div class="lorry-cabin" style="left: ${lorry.isMoving ? 'calc(40% + 180px)' : 'calc(20% + 180px)'};"></div>
                            <div class="lorry-wheels wheel-1" style="left: ${lorry.isMoving ? 'calc(40% + 20px)' : 'calc(20% + 20px)'};"></div>
                            <div class="lorry-wheels wheel-2" style="left: ${lorry.isMoving ? 'calc(40% + 170px)' : 'calc(20% + 170px)'};"></div>
                            <div class="lorry-wheels wheel-3" style="left: ${lorry.isMoving ? 'calc(40% + 210px)' : 'calc(20% + 210px)'};"></div>
                            
                            <div class="cargo-visual ${lorry.currentLoad === 0 ? 'empty-cargo' : ''}" 
                                 style="left: ${lorry.isMoving ? '40%' : '20%'}; width: ${140 + lorry.loadPercentage}px;">
                                ${lorry.currentLoad > 0 ? `${lorry.currentLoad}—Ç` : '–ü–æ—Ä–æ–∂–Ω—å–æ'}
                            </div>
                        </div>
                        
                        <!-- –ü—Ä–æ–≥—Ä–µ—Å-–±–∞—Ä–∏ -->
                        <div style="margin: 15px 0;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                <span>–ü–∞–ª–∏–≤–æ</span>
                                <span>${lorry.currentFuel.toFixed(0)}/${lorry.fuelCapacity}–ª (${lorry.fuelPercentage.toFixed(1)}%)</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill fuel-bar" style="width: ${lorry.fuelPercentage}%"></div>
                            </div>
                            
                            <div style="display: flex; justify-content: space-between; margin: 15px 0 5px;">
                                <span>–í–∞–Ω—Ç–∞–∂</span>
                                <span>${lorry.currentLoad}/${lorry.maxLoad}—Ç (${lorry.loadPercentage.toFixed(1)}%)</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: ${lorry.loadPercentage}%"></div>
                            </div>
                        </div>
                        
                        ${lorry.maintenanceRequired ? `
                            <div style="background: #fef9e7; color: #f39c12; padding: 10px; border-radius: 8px; margin: 10px 0; border-left: 4px solid #f39c12;">
                                ‚ö†Ô∏è –ü–æ—Ç—Ä—ñ–±–Ω–µ —Ç–µ—Ö–Ω—ñ—á–Ω–µ –æ–±—Å–ª—É–≥–æ–≤—É–≤–∞–Ω–Ω—è!
                            </div>
                        ` : ''}
                    </div>
                    
                    <div class="controls">
                        <button class="btn btn-primary" onclick="lorryAction('${lorry.id}', 'engine')">
                            ${lorry.isEngineOn ? 'üî¥ –ó–∞–≥–ª—É—à–∏—Ç–∏' : 'üü¢ –ó–∞–≤–µ—Å—Ç–∏'}
                        </button>
                        <button class="btn btn-secondary" onclick="lorryAction('${lorry.id}', 'move')">
                            ${lorry.isMoving ? 'üõë –ó—É–ø–∏–Ω–∏—Ç–∏' : 'üöö –ü–æ—ó—Ö–∞—Ç–∏'}
                        </button>
                        <button class="btn btn-warning" onclick="lorryAction('${lorry.id}', 'load')">
                            üì¶ –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏
                        </button>
                        <button class="btn btn-danger" onclick="lorryAction('${lorry.id}', 'unload')">
                            üì¶ –†–æ–∑–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏
                        </button>
                        <button class="btn btn-special" onclick="lorryAction('${lorry.id}', 'refuel')">
                            ‚õΩ –ó–∞–ø—Ä–∞–≤–∏—Ç–∏
                        </button>
                        ${lorry.maintenanceRequired ? `
                            <button class="btn btn-warning" onclick="lorryAction('${lorry.id}', 'maintenance')">
                                üîß –¢–û
                            </button>
                        ` : ''}
                    </div>
                `;
                
                container.appendChild(card);
            });
        }

        function lorryAction(lorryId, action) {
            const lorry = lorries.find(l => l.id == lorryId);
            if (!lorry) return;
            
            switch(action) {
                case 'engine':
                    if (lorry.isEngineOn) {
                        lorry.stopEngine();
                    } else {
                        lorry.startEngine();
                    }
                    break;
                    
                case 'move':
                    if (lorry.isMoving) {
                        lorry.stopMoving();
                    } else {
                        const destinations = ['–ö–∏—ó–≤', '–õ—å–≤—ñ–≤', '–û–¥–µ—Å–∞', '–•–∞—Ä–∫—ñ–≤', '–î–Ω—ñ–ø—Ä–æ', '–ó–∞–ø–æ—Ä—ñ–∂–∂—è'];
                        const randomDest = destinations[Math.floor(Math.random() * destinations.length)];
                        const randomSpeed = 50 + Math.floor(Math.random() * 50);
                        lorry.startMoving(randomDest, randomSpeed);
                    }
                    break;
                    
                case 'load':
                    const loadAmount = Math.min(5, lorry.maxLoad - lorry.currentLoad);
                    if (loadAmount > 0) {
                        lorry.loadCargo(loadAmount);
                    } else {
                        lorry.logEvent('–ù–µ–º–∞—î –º—ñ—Å—Ü—è –¥–ª—è –¥–æ–¥–∞—Ç–∫–æ–≤–æ–≥–æ –≤–∞–Ω—Ç–∞–∂—É', 'warning');
                    }
                    break;
                    
                case 'unload':
                    if (lorry.currentLoad > 0) {
                        const unloadAmount = Math.min(3, lorry.currentLoad);
                        lorry.unloadCargo(unloadAmount);
                    } else {
                        lorry.logEvent('–ù–µ–º–∞—î –≤–∞–Ω—Ç–∞–∂—É –¥–ª—è —Ä–æ–∑–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è', 'warning');
                    }
                    break;
                    
                case 'refuel':
                    const fuelAmount = Math.min(100, lorry.fuelCapacity - lorry.currentFuel);
                    lorry.refuel(fuelAmount);
                    break;
                    
                case 'maintenance':
                    lorry.performMaintenance();
                    break;
            }
            
            renderLorries();
            updateStatistics();
        }

        function updateStatistics() {
            const totalLorries = lorries.length;
            const totalCargo = lorries.reduce((sum, lorry) => sum + lorry.currentLoad, 0);
            const movingLorries = lorries.filter(lorry => lorry.isMoving).length;
            const totalDistance = lorries.reduce((sum, lorry) => sum + lorry.mileage, 0);
            
            document.getElementById('totalLorries').textContent = totalLorries;
            document.getElementById('totalCargo').textContent = totalCargo.toFixed(1);
            document.getElementById('movingLorries').textContent = movingLorries;
            document.getElementById('totalDistance').textContent = totalDistance.toLocaleString();
        }

        function addToConsole(logEntry) {
            const consoleDiv = document.getElementById('console');
            const logDiv = document.createElement('div');
            logDiv.className = 'log-entry';
            
            let colorClass = 'log-info';
            if (logEntry.type === 'success') colorClass = 'log-success';
            else if (logEntry.type === 'warning') colorClass = 'log-warning';
            else if (logEntry.type === 'error') colorClass = 'log-error';
            
            logDiv.innerHTML = `
                <span class="log-time">[${logEntry.time}]</span>
                <span class="${colorClass}">
                    <strong>${logEntry.lorry}:</strong> ${logEntry.message}
                </span>
            `;
            
            consoleDiv.prepend(logDiv);
            
            if (consoleDiv.children.length > 20) {
                consoleDiv.removeChild(consoleDiv.lastChild);
            }
        }

        function simulateMovement() {
            lorries.forEach(lorry => {
                lorry.simulateMovement();
            });
            renderLorries();
            updateStatistics();
        }

        window.onload = function() {
            setTimeout(() => {
                document.getElementById('brand').value = 'MAN';
                document.getElementById('model').value = 'TGX';
                document.getElementById('maxLoad').value = 25;
                document.getElementById('fuelCapacity').value = 600;
                document.getElementById('year').value = 2019;
                document.getElementById('licensePlate').value = 'BC 5678 AC';
                createNewLorry();
                
                setTimeout(() => {
                    document.getElementById('brand').value = 'Scania';
                    document.getElementById('model').value = 'R450';
                    document.getElementById('maxLoad').value = 30;
                    document.getElementById('fuelCapacity').value = 700;
                    document.getElementById('year').value = 2021;
                    document.getElementById('licensePlate').value = 'KA 9876 OB';
                    createNewLorry();
                    
                    simulationInterval = setInterval(simulateMovement, 3000);
                }, 300);
            }, 500);
        };
    </script>
</body>
</html>
