<!DOCTYPE html>
<html>
<head>
    <title>Модуль для розрахунків кільця</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
        }
        .ring-visualization {
            display: flex;
            justify-content: center;
            margin: 30px 0;
            padding: 20px;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-radius: 10px;
        }
        .ring-diagram {
            position: relative;
            width: 300px;
            height: 300px;
        }
        .outer-circle {
            position: absolute;
            width: 100%;
            height: 100%;
            border: 3px solid #2196F3;
            border-radius: 50%;
            background: rgba(33, 150, 243, 0.1);
        }
        .inner-circle {
            position: absolute;
            width: 60%;
            height: 60%;
            border: 3px solid #FF9800;
            border-radius: 50%;
            background: white;
            top: 20%;
            left: 20%;
        }
        .radius-line {
            position: absolute;
            background: #333;
            height: 3px;
        }
        .radius-r {
            width: 50%;
            top: 50%;
            left: 50%;
        }
        .radius-r::after {
            content: 'R';
            position: absolute;
            top: -25px;
            right: -10px;
            font-weight: bold;
            color: #2196F3;
        }
        .radius-r2 {
            width: 30%;
            top: 50%;
            left: 50%;
            transform: translateY(-50px);
        }
        .radius-r2::after {
            content: 'r';
            position: absolute;
            top: 10px;
            right: -10px;
            font-weight: bold;
            color: #FF9800;
        }
        .center-dot {
            position: absolute;
            width: 10px;
            height: 10px;
            background: #f44336;
            border-radius: 50%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
        .input-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 30px 0;
        }
        .form-group {
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background-color: #f9f9f9;
        }
        .form-row {
            margin: 15px 0;
        }
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #555;
        }
        input[type="number"] {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
            box-sizing: border-box;
        }
        input[type="number"]:focus {
            border-color: #4CAF50;
            outline: none;
        }
        .unit {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: #666;
        }
        .input-wrapper {
            position: relative;
        }
        button {
            background-color: #4CAF50;
            color: white;
            padding: 14px 28px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin-top: 20px;
            transition: background-color 0.3s;
        }
        button:hover {
            background-color: #45a049;
        }
        .results-section {
            margin-top: 30px;
            padding: 25px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background-color: #e8f4f8;
        }
        .result-item {
            padding: 15px;
            margin: 10px 0;
            background: white;
            border-radius: 5px;
            border-left: 4px solid #4CAF50;
        }
        .result-value {
            font-size: 24px;
            font-weight: bold;
            color: #333;
            margin: 10px 0;
        }
        .result-formula {
            font-family: 'Courier New', monospace;
            background: #f5f5f5;
            padding: 10px;
            border-radius: 3px;
            margin: 10px 0;
            font-size: 14px;
        }
        .result-label {
            color: #666;
            font-size: 14px;
        }
        .formula-info {
            background-color: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 5px;
            padding: 15px;
            margin: 20px 0;
        }
        .module-info {
            background-color: #e8f5e9;
            border: 1px solid #c8e6c9;
            border-radius: 5px;
            padding: 15px;
            margin: 20px 0;
        }
        .tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 2px solid #ddd;
        }
        .tab {
            padding: 12px 24px;
            cursor: pointer;
            background: none;
            border: none;
            font-size: 16px;
            color: #666;
            transition: color 0.3s;
        }
        .tab.active {
            color: #4CAF50;
            border-bottom: 3px solid #4CAF50;
            font-weight: bold;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        .history-item {
            padding: 10px;
            margin: 5px 0;
            background: white;
            border: 1px solid #ddd;
            border-radius: 3px;
            cursor: pointer;
        }
        .history-item:hover {
            background-color: #f0f0f0;
        }
        .example-buttons {
            display: flex;
            gap: 10px;
            margin-top: 10px;
            flex-wrap: wrap;
        }
        .example-btn {
            padding: 8px 12px;
            font-size: 14px;
            background: #2196F3;
            border: none;
            border-radius: 3px;
            color: white;
            cursor: pointer;
        }
        .example-btn:hover {
            background-color: #0b7dda;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Модуль для розрахунків кільця</h1>
        
        <div class="ring-visualization">
            <div class="ring-diagram">
                <div class="outer-circle"></div>
                <div class="inner-circle"></div>
                <div class="radius-line radius-r"></div>
                <div class="radius-line radius-r2"></div>
                <div class="center-dot"></div>
            </div>
        </div>
        
        <div class="tabs">
            <button class="tab active" data-tab="calc">Калькулятор</button>
            <button class="tab" data-tab="formulas">Формули</button>
            <button class="tab" data-tab="history">Історія</button>
        </div>
        
        <div class="tab-content active" id="calc-tab">
            <div class="input-section">
                <div class="form-group">
                    <h3>Вхідні параметри</h3>
                    <div class="form-row">
                        <label>Зовнішній радіус (R):</label>
                        <div class="input-wrapper">
                            <input type="number" id="outerRadius" value="10" min="1" step="0.1">
                            <span class="unit">см</span>
                        </div>
                    </div>
                    <div class="form-row">
                        <label>Внутрішній радіус (r):</label>
                        <div class="input-wrapper">
                            <input type="number" id="innerRadius" value="5" min="0" step="0.1">
                            <span class="unit">см</span>
                        </div>
                    </div>
                    <div class="form-row">
                        <label>Товщина матеріалу:</label>
                        <div class="input-wrapper">
                            <input type="number" id="materialThickness" value="0.5" min="0.1" step="0.1">
                            <span class="unit">см</span>
                        </div>
                    </div>
                    <div class="form-row">
                        <label>Щільність матеріалу:</label>
                        <div class="input-wrapper">
                            <input type="number" id="materialDensity" value="7.8" min="0.1" step="0.1">
                            <span class="unit">г/см³</span>
                        </div>
                    </div>
                    
                    <button onclick="calculateRing()" style="width: 100%;">Розрахувати</button>
                </div>
                
                <div class="form-group">
                    <h3>Налаштування відображення</h3>
                    <div class="form-row">
                        <label>Масштаб діаграми:</label>
                        <div class="input-wrapper">
                            <input type="number" id="diagramScale" value="100" min="50" max="200" step="10">
                            <span class="unit">%</span>
                        </div>
                    </div>
                    <div class="form-row">
                        <label>Точність результатів:</label>
                        <div class="input-wrapper">
                            <input type="number" id="precision" value="3" min="1" max="6" step="1">
                            <span class="unit">знаків</span>
                        </div>
                    </div>
                    
                    <h4 style="margin-top: 20px;">Типові приклади:</h4>
                    <div class="example-buttons">
                        <button class="example-btn" onclick="loadExample(1)">Приклад 1</button>
                        <button class="example-btn" onclick="loadExample(2)">Приклад 2</button>
                        <button class="example-btn" onclick="loadExample(3)">Приклад 3</button>
                    </div>
                </div>
            </div>
            
            <div class="results-section">
                <h3>Результати розрахунків</h3>
                <div class="result-item">
                    <div class="result-label">Площа кільця:</div>
                    <div class="result-value" id="areaResult">—</div>
                    <div class="result-formula" id="areaFormula"></div>
                </div>
                <div class="result-item">
                    <div class="result-label">Момент інерції:</div>
                    <div class="result-value" id="inertiaResult">—</div>
                    <div class="result-formula" id="inertiaFormula"></div>
                </div>
                <div class="result-item">
                    <div class="result-label">Маса кільця:</div>
                    <div class="result-value" id="massResult">—</div>
                    <div class="result-formula">маса = площа × товщина × щільність</div>
                </div>
                <div class="result-item">
                    <div class="result-label">Відношення радіусів:</div>
                    <div class="result-value" id="ratioResult">—</div>
                    <div class="result-formula">r/R = внутрішній / зовнішній</div>
                </div>
            </div>
        </div>
        
        <div class="tab-content" id="formulas-tab">
            <div class="formula-info">
                <h3>Формули в модулі:</h3>
                <div class="result-formula">
                    S = π × (R² - r²)
                </div>
                <div class="result-formula">
                    I = (π/2) × (R⁴ - r⁴)
                </div>
                <div class="result-formula">
                    m = S × h × ρ
                </div>
            </div>
        </div>
        
        <div class="tab-content" id="history-tab">
            <h3>Історія розрахунків</h3>
            <div id="historyList"></div>
        </div>
    </div>

    <script>
        const ringModule = (function() {
            const PI = Math.PI;
            
            function calculateRingArea(outerRadius, innerRadius) {
                if (innerRadius >= outerRadius) {
                    throw new Error('Внутрішній радіус повинен бути меншим за зовнішній');
                }
                if (outerRadius <= 0 || innerRadius < 0) {
                    throw new Error('Радіуси повинні бути додатними числами');
                }
                return PI * (Math.pow(outerRadius, 2) - Math.pow(innerRadius, 2));
            }
            
            function calculateRingInertia(outerRadius, innerRadius) {
                if (innerRadius >= outerRadius) {
                    throw new Error('Внутрішній радіус повинен бути меншим за зовнішній');
                }
                if (outerRadius <= 0 || innerRadius < 0) {
                    throw new Error('Радіуси повинні бути додатними числами');
                }
                return (PI / 2) * (Math.pow(outerRadius, 4) - Math.pow(innerRadius, 4));
            }
            
            function calculateRingMass(area, thickness, density) {
                return area * thickness * density;
            }
            
            function validateRadii(outerRadius, innerRadius) {
                const errors = [];
                if (outerRadius <= 0) errors.push('Зовнішній радіус повинен бути > 0');
                if (innerRadius < 0) errors.push('Внутрішній радіус не може бути від\'ємним');
                if (innerRadius >= outerRadius) errors.push('Внутрішній радіус повинен бути < зовнішнього');
                return errors;
            }
            
            return {
                PI,
                calculateRingArea,
                calculateRingInertia,
                calculateRingMass,
                validateRadii
            };
        })();
        
        let calculationHistory = [];
        
        document.querySelectorAll('.tab').forEach(tab => {
            tab.addEventListener('click', function() {
                const tabName = this.getAttribute('data-tab');
                
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                
                this.classList.add('active');
                document.getElementById(`${tabName}-tab`).classList.add('active');
            });
        });
        
        function updateDiagram() {
            const outerRadius = parseFloat(document.getElementById('outerRadius').value);
            const innerRadius = parseFloat(document.getElementById('innerRadius').value);
            const scale = parseInt(document.getElementById('diagramScale').value) / 100;
            
            const diagram = document.querySelector('.ring-diagram');
            diagram.style.transform = `scale(${scale})`;
            
            const innerCircle = document.querySelector('.inner-circle');
            const ratio = innerRadius / outerRadius;
            const size = Math.min(90, Math.max(10, ratio * 100));
            innerCircle.style.width = `${size}%`;
            innerCircle.style.height = `${size}%`;
            innerCircle.style.top = `${(100 - size) / 2}%`;
            innerCircle.style.left = `${(100 - size) / 2}%`;
        }
        
        function calculateRing() {
            try {
                const outerRadius = parseFloat(document.getElementById('outerRadius').value);
                const innerRadius = parseFloat(document.getElementById('innerRadius').value);
                const thickness = parseFloat(document.getElementById('materialThickness').value);
                const density = parseFloat(document.getElementById('materialDensity').value);
                const precision = parseInt(document.getElementById('precision').value);
                
                const validationErrors = ringModule.validateRadii(outerRadius, innerRadius);
                if (validationErrors.length > 0) {
                    alert('Помилка введення:\n' + validationErrors.join('\n'));
                    return;
                }
                
                const area = ringModule.calculateRingArea(outerRadius, innerRadius);
                const inertia = ringModule.calculateRingInertia(outerRadius, innerRadius);
                const mass = ringModule.calculateRingMass(area, thickness, density);
                const ratio = innerRadius / outerRadius;
                
                const formatNumber = (num) => num.toFixed(precision);
                
                document.getElementById('areaResult').textContent = `${formatNumber(area)} см²`;
                document.getElementById('inertiaResult').textContent = `${formatNumber(inertia)} см⁴`;
                document.getElementById('massResult').textContent = `${formatNumber(mass)} г`;
                document.getElementById('ratioResult').textContent = formatNumber(ratio);
                
                document.getElementById('areaFormula').textContent = 
                    `S = π × (${outerRadius}² - ${innerRadius}²) = ${formatNumber(area)} см²`;
                
                document.getElementById('inertiaFormula').textContent = 
                    `I = (π/2) × (${outerRadius}⁴ - ${innerRadius}⁴) = ${formatNumber(inertia)} см⁴`;
                
                const calculation = {
                    timestamp: new Date().toLocaleTimeString(),
                    outerRadius,
                    innerRadius,
                    area: parseFloat(formatNumber(area)),
                    inertia: parseFloat(formatNumber(inertia)),
                    mass: parseFloat(formatNumber(mass))
                };
                
                calculationHistory.unshift(calculation);
                if (calculationHistory.length > 10) calculationHistory.pop();
                
                updateHistoryDisplay();
                updateDiagram();
                
            } catch (error) {
                alert(`Помилка: ${error.message}`);
            }
        }
        
        function updateHistoryDisplay() {
            const historyList = document.getElementById('historyList');
            historyList.innerHTML = '';
            
            if (calculationHistory.length === 0) {
                historyList.innerHTML = '<p>Історія розрахунків порожня</p>';
                return;
            }
            
            calculationHistory.forEach((calc, index) => {
                const item = document.createElement('div');
                item.className = 'history-item';
                item.innerHTML = `
                    <strong>${calc.timestamp}</strong><br>
                    R=${calc.outerRadius}см, r=${calc.innerRadius}см<br>
                    Площа: ${calc.area} см², Інерція: ${calc.inertia} см⁴
                `;
                item.addEventListener('click', () => loadFromHistory(calc));
                historyList.appendChild(item);
            });
        }
        
        function loadFromHistory(calc) {
            document.getElementById('outerRadius').value = calc.outerRadius;
            document.getElementById('innerRadius').value = calc.innerRadius;
            document.querySelector('[data-tab="calc"]').click();
            calculateRing();
        }
        
        function loadExample(exampleNumber) {
            const examples = {
                1: { outer: 10, inner: 5, thickness: 0.5, density: 7.8 },
                2: { outer: 15, inner: 10, thickness: 1.0, density: 2.7 },
                3: { outer: 8, inner: 6, thickness: 0.3, density: 19.3 }
            };
            
            const ex = examples[exampleNumber];
            document.getElementById('outerRadius').value = ex.outer;
            document.getElementById('innerRadius').value = ex.inner;
            document.getElementById('materialThickness').value = ex.thickness;
            document.getElementById('materialDensity').value = ex.density;
            
            calculateRing();
        }
        
        document.getElementById('outerRadius').addEventListener('input', updateDiagram);
        document.getElementById('innerRadius').addEventListener('input', updateDiagram);
        document.getElementById('diagramScale').addEventListener('input', updateDiagram);
        
        window.onload = function() {
            updateDiagram();
            calculateRing();
        };
    </script>
</body>
</html>
