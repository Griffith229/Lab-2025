<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–û–±—Ä–æ–±–∫–∞ –¥–∞—Ç –∑ –≤–∏–Ω—è—Ç–∫–æ–≤–∏–º–∏ —Å–∏—Ç—É–∞—Ü—ñ—è–º–∏</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            background-color: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 10px;
            padding-bottom: 15px;
            border-bottom: 3px solid #3498db;
            background: linear-gradient(to right, #3498db, #2ecc71);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .task {
            background-color: #e8f4fc;
            padding: 20px;
            border-radius: 10px;
            margin: 25px 0;
            border-left: 5px solid #3498db;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 30px 0;
            flex-wrap: wrap;
        }
        .btn {
            background: linear-gradient(45deg, #3498db, #2ecc71);
            color: white;
            padding: 14px 28px;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s ease;
            min-width: 200px;
            box-shadow: 0 4px 15px rgba(52, 152, 219, 0.3);
        }
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(52, 152, 219, 0.4);
        }
        .btn-test {
            background: linear-gradient(45deg, #9b59b6, #e74c3c);
        }
        .btn-test:hover {
            box-shadow: 0 6px 20px rgba(155, 89, 182, 0.4);
        }
        .btn-reset {
            background: linear-gradient(45deg, #34495e, #2c3e50);
        }
        .btn-reset:hover {
            box-shadow: 0 6px 20px rgba(52, 73, 94, 0.4);
        }
        .input-section {
            background-color: white;
            padding: 25px;
            border-radius: 10px;
            margin: 25px 0;
            border: 2px solid #e0e0e0;
            box-shadow: 0 4px 8px rgba(0,0,0,0.05);
        }
        .result-section {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            padding: 25px;
            border-radius: 10px;
            margin: 25px 0;
            border: 2px solid #a8edea;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        .date-inputs {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 25px 0;
        }
        .input-group {
            display: flex;
            flex-direction: column;
        }
        .input-group label {
            margin-bottom: 8px;
            font-weight: 600;
            color: #2c3e50;
            font-size: 16px;
        }
        input[type="number"] {
            padding: 12px;
            border: 2px solid #3498db;
            border-radius: 10px;
            font-size: 16px;
            transition: all 0.3s;
        }
        input[type="number"]:focus {
            outline: none;
            border-color: #9b59b6;
            box-shadow: 0 0 0 3px rgba(155, 89, 182, 0.2);
        }
        .input-group input.valid {
            border-color: #2ecc71;
            background-color: rgba(46, 204, 113, 0.05);
        }
        .input-group input.invalid {
            border-color: #e74c3c;
            background-color: rgba(231, 76, 60, 0.05);
        }
        .validation-rules {
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 4px solid #6c757d;
        }
        .highlight {
            background: linear-gradient(120deg, #3498db 0%, #2ecc71 100%);
            padding: 5px 15px;
            border-radius: 5px;
            font-weight: bold;
            color: white;
            font-size: 18px;
            display: inline-block;
            margin: 5px;
        }
        .date-result {
            background: white;
            padding: 25px;
            border-radius: 10px;
            margin: 20px 0;
            border: 2px solid #e0e0e0;
            text-align: center;
        }
        .date-display {
            font-size: 36px;
            font-weight: bold;
            color: #2c3e50;
            margin: 15px 0;
        }
        .date-format {
            font-size: 18px;
            color: #666;
            margin: 10px 0;
        }
        .error-section {
            background: #f8d7da;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 5px solid #e74c3c;
            display: none;
        }
        .error-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }
        .error-icon {
            font-size: 24px;
            color: #e74c3c;
        }
        .error-message {
            color: #721c24;
            font-size: 18px;
            font-weight: bold;
        }
        .error-details {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            border: 1px solid #f5c6cb;
        }
        .test-cases {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .test-case {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid transparent;
        }
        .test-case:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
        }
        .test-case.valid {
            border-color: #2ecc71;
        }
        .test-case.invalid {
            border-color: #e74c3c;
        }
        .test-date {
            font-family: monospace;
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 10px;
        }
        .test-description {
            color: #666;
            font-size: 14px;
            margin-bottom: 10px;
        }
        .test-status {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: bold;
        }
        .status-valid {
            background-color: #d4edda;
            color: #155724;
        }
        .status-invalid {
            background-color: #f8d7da;
            color: #721c24;
        }
        .calendar-section {
            background: white;
            padding: 25px;
            border-radius: 10px;
            margin: 20px 0;
            border: 2px solid #e0e0e0;
        }
        .calendar {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
            margin-top: 20px;
        }
        .calendar-header {
            text-align: center;
            font-weight: bold;
            padding: 10px;
            background: #3498db;
            color: white;
            border-radius: 5px;
        }
        .calendar-day {
            padding: 15px;
            text-align: center;
            border: 1px solid #dee2e6;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
        }
        .calendar-day:hover {
            background: #e8f4fc;
        }
        .calendar-day.selected {
            background: #3498db;
            color: white;
            font-weight: bold;
        }
        .calendar-day.today {
            background: #2ecc71;
            color: white;
            font-weight: bold;
        }
        .calendar-day.other-month {
            color: #ccc;
        }
        .date-info {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }
        h2, h3 {
            color: #2c3e50;
            margin-top: 0;
            position: relative;
            padding-bottom: 10px;
        }
        h2::after, h3::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 60px;
            height: 3px;
            background: linear-gradient(to right, #3498db, #2ecc71);
        }
        .info-box {
            background-color: #fff3cd;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid #ffc107;
            color: #856404;
        }
        .statistics {
            display: flex;
            justify-content: space-around;
            margin: 30px 0;
            flex-wrap: wrap;
            gap: 20px;
        }
        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            text-align: center;
            flex: 1;
            min-width: 200px;
        }
        .stat-value {
            font-size: 32px;
            font-weight: bold;
            margin: 10px 0;
            color: #3498db;
        }
        .stat-label {
            color: #7f8c8d;
            font-size: 14px;
        }
        .exception-history {
            max-height: 300px;
            overflow-y: auto;
            margin: 20px 0;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
            border: 1px solid #dee2e6;
        }
        .exception-item {
            padding: 10px;
            margin: 5px 0;
            border-radius: 5px;
            border-left: 4px solid #e74c3c;
            background: white;
        }
        .exception-time {
            font-size: 12px;
            color: #999;
        }
        .exception-text {
            font-weight: bold;
            color: #721c24;
        }
        .month-selector {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 20px 0;
        }
        .month-btn {
            background: #3498db;
            color: white;
            border: none;
            border-radius: 5px;
            padding: 10px 15px;
            cursor: pointer;
            font-size: 18px;
        }
        .current-month {
            font-size: 20px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üìÖ –ö–ª–∞—Å Day –∑ –æ–±—Ä–æ–±–∫–æ—é –≤–∏–Ω—è—Ç–∫–æ–≤–∏—Ö —Å–∏—Ç—É–∞—Ü—ñ–π</h1>
        
        <div class="task">
            <h2>–ó–∞–≤–¥–∞–Ω–Ω—è:</h2>
            <p>–°—Ç–≤–æ—Ä–∏—Ç–∏ –∫–ª–∞—Å Day –∑ –ø–æ–ª—è–º–∏ day, month, year. –ó–∞–ø—Ä–æ–≥—Ä–∞–º—É–≤–∞—Ç–∏ –≤–∏–Ω–∏–∫–Ω–µ–Ω–Ω—è –≤–∏–Ω—è—Ç–∫–æ–≤–æ—ó —Å–∏—Ç—É–∞—Ü—ñ—ó —É –≤–∏–ø–∞–¥–∫—É, –∫–æ–ª–∏ –≤–≤–µ–¥–µ–Ω–æ –Ω–µ–∫–æ—Ä–µ–∫—Ç–Ω—ñ –¥–∞–Ω—ñ –¥–Ω—è (–ø–æ–≤–∏–Ω–µ–Ω –±—É—Ç–∏ –≤—ñ–¥ 1 –¥–æ 30), –º—ñ—Å—è—Ü—è (–ø–æ–≤–∏–Ω–µ–Ω –±—É—Ç–∏ –≤—ñ–¥ 1 –¥–æ 12) —ñ —Ä–æ–∫—É (–ø–æ–≤–∏–Ω–µ–Ω –±—É—Ç–∏ –≤—ñ–¥ 1970 –¥–æ 2024).</p>
        </div>
        
        <div class="input-section">
            <h2>üìù –í–≤–µ–¥–µ–Ω–Ω—è –¥–∞—Ç–∏</h2>
            
            <div class="validation-rules">
                <strong>–í–∞–ª—ñ–¥–∞—Ü—ñ–π–Ω—ñ –ø—Ä–∞–≤–∏–ª–∞:</strong>
                <ul>
                    <li>–î–µ–Ω—å: –≤—ñ–¥ 1 –¥–æ 30 (–¥–ª—è —Å–ø—Ä–æ—â–µ–Ω–Ω—è –≤–≤–∞–∂–∞—î–º–æ –≤—Å—ñ –º—ñ—Å—è—Ü—ñ 30-–¥–Ω—ñ–≤–Ω–∏–º–∏)</li>
                    <li>–ú—ñ—Å—è—Ü—å: –≤—ñ–¥ 1 –¥–æ 12</li>
                    <li>–†—ñ–∫: –≤—ñ–¥ 1970 –¥–æ 2024</li>
                </ul>
            </div>
            
            <div class="date-inputs">
                <div class="input-group">
                    <label for="dayInput">–î–µ–Ω—å (1-30):</label>
                    <input type="number" id="dayInput" min="1" max="30" value="15" placeholder="–í–≤–µ–¥—ñ—Ç—å –¥–µ–Ω—å">
                    <div class="input-hint" id="dayHint"></div>
                </div>
                
                <div class="input-group">
                    <label for="monthInput">–ú—ñ—Å—è—Ü—å (1-12):</label>
                    <input type="number" id="monthInput" min="1" max="12" value="6" placeholder="–í–≤–µ–¥—ñ—Ç—å –º—ñ—Å—è—Ü—å">
                    <div class="input-hint" id="monthHint"></div>
                </div>
                
                <div class="input-group">
                    <label for="yearInput">–†—ñ–∫ (1970-2024):</label>
                    <input type="number" id="yearInput" min="1970" max="2024" value="2023" placeholder="–í–≤–µ–¥—ñ—Ç—å —Ä—ñ–∫">
                    <div class="input-hint" id="yearHint"></div>
                </div>
            </div>
            
            <div class="controls">
                <button class="btn" onclick="createDate()">–°—Ç–≤–æ—Ä–∏—Ç–∏ –¥–∞—Ç—É</button>
                <button class="btn btn-test" onclick="runTestCases()">–ó–∞–ø—É—Å—Ç–∏—Ç–∏ —Ç–µ—Å—Ç–∏</button>
                <button class="btn btn-reset" onclick="resetAll()">–°–∫–∏–Ω—É—Ç–∏ –≤—Å–µ</button>
            </div>
        </div>
        
        <div id="errorSection" class="error-section">
            <div class="error-header">
                <div class="error-icon">‚ö†Ô∏è</div>
                <div class="error-message" id="errorTitle">–í–∏–Ω—è—Ç–∫–æ–≤–∞ —Å–∏—Ç—É–∞—Ü—ñ—è!</div>
            </div>
            <div class="error-details" id="errorDetails">
            </div>
        </div>
        
        <div id="resultSection" class="result-section" style="display: none;">
            <h2>‚úÖ –£—Å–ø—ñ—à–Ω–æ —Å—Ç–≤–æ—Ä–µ–Ω–∞ –¥–∞—Ç–∞</h2>
            
            <div class="date-result">
                <div class="date-display" id="dateDisplay"></div>
                <div class="date-format" id="dateFormat"></div>
                
                <div class="statistics">
                    <div class="stat-card">
                        <div class="stat-label">–î–µ–Ω—å —Ç–∏–∂–Ω—è</div>
                        <div class="stat-value" id="dayOfWeek"></div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">–î–Ω—ñ–≤ –∑ –ø–æ—á–∞—Ç–∫—É —Ä–æ–∫—É</div>
                        <div class="stat-value" id="dayOfYear"></div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">–í—ñ–∫ –¥–∞—Ç–∏</div>
                        <div class="stat-value" id="dateAge"></div>
                    </div>
                </div>
            </div>
            
            <div class="calendar-section">
                <h3>üìÜ –ö–∞–ª–µ–Ω–¥–∞—Ä –º—ñ—Å—è—Ü—è</h3>
                <div class="month-selector">
                    <button class="month-btn" onclick="changeMonth(-1)">‚Üê</button>
                    <div class="current-month" id="currentMonth">–ß–µ—Ä–≤–µ–Ω—å 2023</div>
                    <button class="month-btn" onclick="changeMonth(1)">‚Üí</button>
                </div>
                <div id="calendarContainer" class="calendar">
                </div>
            </div>
        </div>
        
        <div class="result-section">
            <h2>üß™ –¢–µ—Å—Ç–æ–≤—ñ –≤–∏–ø–∞–¥–∫–∏</h2>
            
            <div class="test-cases">
                <div class="test-case valid" onclick="loadTestCase(15, 6, 2023)">
                    <div class="test-date">15.06.2023</div>
                    <div class="test-description">–ö–æ—Ä–µ–∫—Ç–Ω–∞ –¥–∞—Ç–∞</div>
                    <span class="test-status status-valid">–í–ê–õ–Ü–î–ù–ê</span>
                </div>
                
                <div class="test-case invalid" onclick="loadTestCase(0, 6, 2023)">
                    <div class="test-date">0.06.2023</div>
                    <div class="test-description">–î–µ–Ω—å –º–µ–Ω—à–µ 1</div>
                    <span class="test-status status-invalid">–ù–ï–í–ê–õ–Ü–î–ù–ê</span>
                </div>
                
                <div class="test-case invalid" onclick="loadTestCase(32, 6, 2023)">
                    <div class="test-date">32.06.2023</div>
                    <div class="test-description">–î–µ–Ω—å –±—ñ–ª—å—à–µ 30</div>
                    <span class="test-status status-invalid">–ù–ï–í–ê–õ–Ü–î–ù–ê</span>
                </div>
                
                <div class="test-case invalid" onclick="loadTestCase(15, 0, 2023)">
                    <div class="test-date">15.0.2023</div>
                    <div class="test-description">–ú—ñ—Å—è—Ü—å –º–µ–Ω—à–µ 1</div>
                    <span class="test-status status-invalid">–ù–ï–í–ê–õ–Ü–î–ù–ê</span>
                </div>
                
                <div class="test-case invalid" onclick="loadTestCase(15, 13, 2023)">
                    <div class="test-date">15.13.2023</div>
                    <div class="test-description">–ú—ñ—Å—è—Ü—å –±—ñ–ª—å—à–µ 12</div>
                    <span class="test-status status-invalid">–ù–ï–í–ê–õ–Ü–î–ù–ê</span>
                </div>
                
                <div class="test-case invalid" onclick="loadTestCase(15, 6, 1969)">
                    <div class="test-date">15.06.1969</div>
                    <div class="test-description">–†—ñ–∫ –º–µ–Ω—à–µ 1970</div>
                    <span class="test-status status-invalid">–ù–ï–í–ê–õ–Ü–î–ù–ê</span>
                </div>
                
                <div class="test-case invalid" onclick="loadTestCase(15, 6, 2025)">
                    <div class="test-date">15.06.2025</div>
                    <div class="test-description">–†—ñ–∫ –±—ñ–ª—å—à–µ 2024</div>
                    <span class="test-status status-invalid">–ù–ï–í–ê–õ–Ü–î–ù–ê</span>
                </div>
                
                <div class="test-case invalid" onclick="loadTestCase(32, 13, 3000)">
                    <div class="test-date">32.13.3000</div>
                    <div class="test-description">–í—Å—ñ –∑–Ω–∞—á–µ–Ω–Ω—è –Ω–µ–∫–æ—Ä–µ–∫—Ç–Ω—ñ</div>
                    <span class="test-status status-invalid">–ù–ï–í–ê–õ–Ü–î–ù–ê</span>
                </div>
            </div>
            
            <div class="exception-history">
                <h3>üìã –Ü—Å—Ç–æ—Ä—ñ—è –≤–∏–Ω—è—Ç–∫–æ–≤–∏—Ö —Å–∏—Ç—É–∞—Ü—ñ–π</h3>
                <div id="exceptionHistory">
                </div>
            </div>
        </div>
    </div>

    <script>
        class Day {
            constructor(day, month, year) {
                this.validateDate(day, month, year);
                
                this.day = day;
                this.month = month;
                this.year = year;
                
                this.date = this.createDateObject(day, month, year);
            }
            
            createDateObject(day, month, year) {
                const actualDay = Math.min(day, 30);
                return new Date(year, month - 1, actualDay);
            }
            
            validateDate(day, month, year) {
                const errors = [];
                
                if (!Number.isInteger(day)) {
                    throw new DayError(`–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π –¥–µ–Ω—å: ${day}. –î–µ–Ω—å –ø–æ–≤–∏–Ω–µ–Ω –±—É—Ç–∏ —Ü—ñ–ª–∏–º —á–∏—Å–ª–æ–º.`);
                }
                
                if (!Number.isInteger(month)) {
                    throw new MonthError(`–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π –º—ñ—Å—è—Ü—å: ${month}. –ú—ñ—Å—è—Ü—å –ø–æ–≤–∏–Ω–µ–Ω –±—É—Ç–∏ —Ü—ñ–ª–∏–º —á–∏—Å–ª–æ–º.`);
                }
                
                if (!Number.isInteger(year)) {
                    throw new YearError(`–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π —Ä—ñ–∫: ${year}. –†—ñ–∫ –ø–æ–≤–∏–Ω–µ–Ω –±—É—Ç–∏ —Ü—ñ–ª–∏–º —á–∏—Å–ª–æ–º.`);
                }
                
                if (day < 1 || day > 30) {
                    throw new DayError(`–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π –¥–µ–Ω—å: ${day}. –î–µ–Ω—å –ø–æ–≤–∏–Ω–µ–Ω –±—É—Ç–∏ –≤—ñ–¥ 1 –¥–æ 30.`);
                }
                
                if (month < 1 || month > 12) {
                    throw new MonthError(`–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π –º—ñ—Å—è—Ü—å: ${month}. –ú—ñ—Å—è—Ü—å –ø–æ–≤–∏–Ω–µ–Ω –±—É—Ç–∏ –≤—ñ–¥ 1 –¥–æ 12.`);
                }
                
                if (year < 1970 || year > 2024) {
                    throw new YearError(`–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π —Ä—ñ–∫: ${year}. –†—ñ–∫ –ø–æ–≤–∏–Ω–µ–Ω –±—É—Ç–∏ –≤—ñ–¥ 1970 –¥–æ 2024.`);
                }
            }
            
            getFormattedDate(format = 'dd.mm.yyyy') {
                const dayStr = this.day.toString().padStart(2, '0');
                const monthStr = this.month.toString().padStart(2, '0');
                const yearStr = this.year.toString();
                
                switch(format) {
                    case 'dd.mm.yyyy':
                        return `${dayStr}.${monthStr}.${yearStr}`;
                    case 'yyyy-mm-dd':
                        return `${yearStr}-${monthStr}-${dayStr}`;
                    case 'mm/dd/yyyy':
                        return `${monthStr}/${dayStr}/${yearStr}`;
                    default:
                        return `${dayStr}.${monthStr}.${yearStr}`;
                }
            }
            
            getDayOfWeek() {
                const days = ['–ù–µ–¥—ñ–ª—è', '–ü–æ–Ω–µ–¥—ñ–ª–æ–∫', '–í—ñ–≤—Ç–æ—Ä–æ–∫', '–°–µ—Ä–µ–¥–∞', '–ß–µ—Ç–≤–µ—Ä', '–ü\'—è—Ç–Ω–∏—Ü—è', '–°—É–±–æ—Ç–∞'];
                return days[this.date.getDay()];
            }
            
            getDayOfYear() {
                return (this.month - 1) * 30 + this.day;
            }
            
            getAgeInDays() {
                const today = new Date();
                const todayDay = new Date().getDate();
                const todayMonth = new Date().getMonth() + 1;
                const todayYear = new Date().getFullYear();
                
                const diffYears = todayYear - this.year;
                const diffMonths = todayMonth - this.month;
                const diffDays = todayDay - this.day;
                
                return diffYears * 360 + diffMonths * 30 + diffDays; // 360 –¥–Ω—ñ–≤ —É —Ä–æ—Ü—ñ (12*30)
            }
            
            isLeapYear() {
                return (this.year % 4 === 0 && this.year % 100 !== 0) || (this.year % 400 === 0);
            }
        }
        
        class DayError extends Error {
            constructor(message) {
                super(message);
                this.name = 'DayError';
                this.type = 'day';
            }
        }
        
        class MonthError extends Error {
            constructor(message) {
                super(message);
                this.name = 'MonthError';
                this.type = 'month';
            }
        }
        
        class YearError extends Error {
            constructor(message) {
                super(message);
                this.name = 'YearError';
                this.type = 'year';
            }
        }
        
        let currentDay = null;
        let exceptionHistory = [];
        let currentCalendarMonth = 6; 
        let currentCalendarYear = 2023; 
        
        function createDate() {
            try {
                const day = parseInt(document.getElementById('dayInput').value);
                const month = parseInt(document.getElementById('monthInput').value);
                const year = parseInt(document.getElementById('yearInput').value);
                
                if (isNaN(day) || isNaN(month) || isNaN(year)) {
                    throw new Error('–ë—É–¥—å –ª–∞—Å–∫–∞, –≤–≤–µ–¥—ñ—Ç—å –∫–æ—Ä–µ–∫—Ç–Ω—ñ —á–∏—Å–ª–æ–≤—ñ –∑–Ω–∞—á–µ–Ω–Ω—è');
                }
                
                validateInputs(day, month, year);
                
                currentDay = new Day(day, month, year);
                
                document.getElementById('errorSection').style.display = 'none';
                
                document.getElementById('resultSection').style.display = 'block';
                
                displayDateResult(currentDay);
                
                currentCalendarMonth = month;
                currentCalendarYear = year;
                
                generateCalendar(month, year, day);
                
                resetHints();
                
            } catch (error) {
                handleException(error);
            }
        }
        
        function validateInputs(day, month, year) {
            let isValid = true;
            
            const dayInput = document.getElementById('dayInput');
            const dayHint = document.getElementById('dayHint');
            
            if (isNaN(day)) {
                dayInput.classList.add('invalid');
                dayInput.classList.remove('valid');
                dayHint.textContent = '–ë—É–¥—å –ª–∞—Å–∫–∞, –≤–≤–µ–¥—ñ—Ç—å —á–∏—Å–ª–æ';
                dayHint.style.color = '#e74c3c';
                isValid = false;
            } else if (day < 1 || day > 30) {
                dayInput.classList.add('invalid');
                dayInput.classList.remove('valid');
                dayHint.textContent = '–î–µ–Ω—å –ø–æ–≤–∏–Ω–µ–Ω –±—É—Ç–∏ —á–∏—Å–ª–æ–º –≤—ñ–¥ 1 –¥–æ 30';
                dayHint.style.color = '#e74c3c';
                isValid = false;
            } else {
                dayInput.classList.add('valid');
                dayInput.classList.remove('invalid');
                dayHint.textContent = '‚úì –ö–æ—Ä–µ–∫—Ç–Ω–∏–π –¥–µ–Ω—å';
                dayHint.style.color = '#2ecc71';
            }
            
            const monthInput = document.getElementById('monthInput');
            const monthHint = document.getElementById('monthHint');
            
            if (isNaN(month)) {
                monthInput.classList.add('invalid');
                monthInput.classList.remove('valid');
                monthHint.textContent = '–ë—É–¥—å –ª–∞—Å–∫–∞, –≤–≤–µ–¥—ñ—Ç—å —á–∏—Å–ª–æ';
                monthHint.style.color = '#e74c3c';
                isValid = false;
            } else if (month < 1 || month > 12) {
                monthInput.classList.add('invalid');
                monthInput.classList.remove('valid');
                monthHint.textContent = '–ú—ñ—Å—è—Ü—å –ø–æ–≤–∏–Ω–µ–Ω –±—É—Ç–∏ —á–∏—Å–ª–æ–º –≤—ñ–¥ 1 –¥–æ 12';
                monthHint.style.color = '#e74c3c';
                isValid = false;
            } else {
                monthInput.classList.add('valid');
                monthInput.classList.remove('invalid');
                monthHint.textContent = '‚úì –ö–æ—Ä–µ–∫—Ç–Ω–∏–π –º—ñ—Å—è—Ü—å';
                monthHint.style.color = '#2ecc71';
            }
            
            const yearInput = document.getElementById('yearInput');
            const yearHint = document.getElementById('yearHint');
            
            if (isNaN(year)) {
                yearInput.classList.add('invalid');
                yearInput.classList.remove('valid');
                yearHint.textContent = '–ë—É–¥—å –ª–∞—Å–∫–∞, –≤–≤–µ–¥—ñ—Ç—å —á–∏—Å–ª–æ';
                yearHint.style.color = '#e74c3c';
                isValid = false;
            } else if (year < 1970 || year > 2024) {
                yearInput.classList.add('invalid');
                yearInput.classList.remove('valid');
                yearHint.textContent = '–†—ñ–∫ –ø–æ–≤–∏–Ω–µ–Ω –±—É—Ç–∏ —á–∏—Å–ª–æ–º –≤—ñ–¥ 1970 –¥–æ 2024';
                yearHint.style.color = '#e74c3c';
                isValid = false;
            } else {
                yearInput.classList.add('valid');
                yearInput.classList.remove('invalid');
                yearHint.textContent = '‚úì –ö–æ—Ä–µ–∫—Ç–Ω–∏–π —Ä—ñ–∫';
                yearHint.style.color = '#2ecc71';
            }
            
            if (!isValid) {
                throw new Error('–ù–µ–∫–æ—Ä–µ–∫—Ç–Ω—ñ –¥–∞–Ω—ñ –≤ –ø–æ–ª—è—Ö –≤–≤–æ–¥—É');
            }
        }
        
        function handleException(error) {
            const day = document.getElementById('dayInput').value;
            const month = document.getElementById('monthInput').value;
            const year = document.getElementById('yearInput').value;
            
            const exception = {
                timestamp: new Date().toLocaleTimeString(),
                type: error.name || 'Error',
                message: error.message,
                day: day,
                month: month,
                year: year
            };
            
            exceptionHistory.unshift(exception); 
            if (exceptionHistory.length > 10) {
                exceptionHistory = exceptionHistory.slice(0, 10); 
            }
            
            document.getElementById('errorSection').style.display = 'block';
            document.getElementById('resultSection').style.display = 'none';
            
            document.getElementById('errorTitle').textContent = `–í–∏–Ω—è—Ç–∫–æ–≤–∞ —Å–∏—Ç—É–∞—Ü—ñ—è: ${error.name || '–ü–æ–º–∏–ª–∫–∞'}`;
            
            const errorDetails = document.getElementById('errorDetails');
            errorDetails.innerHTML = `
                <p><strong>–ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è:</strong> ${error.message}</p>
                <p><strong>–í–≤–µ–¥–µ–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è:</strong> –î–µ–Ω—å=${day}, –ú—ñ—Å—è—Ü—å=${month}, –†—ñ–∫=${year}</p>
                <p><strong>–ß–∞—Å –≤–∏–Ω–∏–∫–Ω–µ–Ω–Ω—è:</strong> ${new Date().toLocaleString()}</p>
                ${error.type ? `<p><strong>–¢–∏–ø –ø–æ–º–∏–ª–∫–∏:</strong> ${error.type}</p>` : ''}
            `;
            
            updateExceptionHistory();
            
            highlightErrorField(error.type);
        }
        
        function highlightErrorField(errorType) {
            document.getElementById('dayInput').classList.remove('invalid');
            document.getElementById('monthInput').classList.remove('invalid');
            document.getElementById('yearInput').classList.remove('invalid');
            
            switch(errorType) {
                case 'day':
                    document.getElementById('dayInput').classList.add('invalid');
                    break;
                case 'month':
                    document.getElementById('monthInput').classList.add('invalid');
                    break;
                case 'year':
                    document.getElementById('yearInput').classList.add('invalid');
                    break;
            }
        }
        
        function displayDateResult(dayObj) {
            document.getElementById('dateDisplay').textContent = dayObj.getFormattedDate();
            document.getElementById('dateFormat').textContent = `–§–æ—Ä–º–∞—Ç: ${dayObj.getFormattedDate('yyyy-mm-dd')} | ${dayObj.getFormattedDate('mm/dd/yyyy')}`;
            
            document.getElementById('dayOfWeek').textContent = dayObj.getDayOfWeek();
            document.getElementById('dayOfYear').textContent = dayObj.getDayOfYear();
            document.getElementById('dateAge').textContent = `${Math.abs(dayObj.getAgeInDays())} –¥–Ω—ñ–≤`;
        }
        
        function generateCalendar(month, year, selectedDay) {
            const calendar = document.getElementById('calendarContainer');
            calendar.innerHTML = '';
            
            const monthNames = ['–°—ñ—á–µ–Ω—å', '–õ—é—Ç–∏–π', '–ë–µ—Ä–µ–∑–µ–Ω—å', '–ö–≤—ñ—Ç–µ–Ω—å', '–¢—Ä–∞–≤–µ–Ω—å', '–ß–µ—Ä–≤–µ–Ω—å',
                              '–õ–∏–ø–µ–Ω—å', '–°–µ—Ä–ø–µ–Ω—å', '–í–µ—Ä–µ—Å–µ–Ω—å', '–ñ–æ–≤—Ç–µ–Ω—å', '–õ–∏—Å—Ç–æ–ø–∞–¥', '–ì—Ä—É–¥–µ–Ω—å'];
            document.getElementById('currentMonth').textContent = `${monthNames[month-1]} ${year}`;
            
            const daysOfWeek = ['–ü–Ω', '–í—Ç', '–°—Ä', '–ß—Ç', '–ü—Ç', '–°–±', '–ù–¥'];
            daysOfWeek.forEach(day => {
                const dayElement = document.createElement('div');
                dayElement.className = 'calendar-header';
                dayElement.textContent = day;
                calendar.appendChild(dayElement);
            });
            
            const firstDayOfWeek = 0; 
            
            let dayCounter = 1;
            
            for (let i = 0; i < 42; i++) {
                const dayElement = document.createElement('div');
                dayElement.className = 'calendar-day';
                
                if (i < firstDayOfWeek || dayCounter > 30) {
                    dayElement.classList.add('other-month');
                    dayElement.textContent = '';
                } else {
                    dayElement.textContent = dayCounter;
                    
                    const today = new Date();
                    if (dayCounter === today.getDate() && month === today.getMonth() + 1 && year === today.getFullYear()) {
                        dayElement.classList.add('today');
                    }
                    
                    if (dayCounter === selectedDay) {
                        dayElement.classList.add('selected');
                    }
                    
                    dayElement.onclick = () => {
                        document.getElementById('dayInput').value = dayCounter;
                        createDate();
                    };
                    dayCounter++;
                }
                
                calendar.appendChild(dayElement);
            }
        }
        
        function changeMonth(delta) {
            currentCalendarMonth += delta;
            
            if (currentCalendarMonth > 12) {
                currentCalendarMonth = 1;
                currentCalendarYear++;
            } else if (currentCalendarMonth < 1) {
                currentCalendarMonth = 12;
                currentCalendarYear--;
            }
            
            document.getElementById('monthInput').value = currentCalendarMonth;
            document.getElementById('yearInput').value = currentCalendarYear;
            
            generateCalendar(currentCalendarMonth, currentCalendarYear);
        }
        
        function loadTestCase(day, month, year) {
            document.getElementById('dayInput').value = day;
            document.getElementById('monthInput').value = month;
            document.getElementById('yearInput').value = year;
            
            createDate();
        }
        
        function runTestCases() {
            const testCases = [
                { day: 15, month: 6, year: 2023, valid: true, desc: '–ö–æ—Ä–µ–∫—Ç–Ω–∞ –¥–∞—Ç–∞' },
                { day: 0, month: 6, year: 2023, valid: false, desc: '–î–µ–Ω—å –º–µ–Ω—à–µ 1' },
                { day: 32, month: 6, year: 2023, valid: false, desc: '–î–µ–Ω—å –±—ñ–ª—å—à–µ 30' },
                { day: 15, month: 0, year: 2023, valid: false, desc: '–ú—ñ—Å—è—Ü—å –º–µ–Ω—à–µ 1' },
                { day: 15, month: 13, year: 2023, valid: false, desc: '–ú—ñ—Å—è—Ü—å –±—ñ–ª—å—à–µ 12' },
                { day: 15, month: 6, year: 1969, valid: false, desc: '–†—ñ–∫ –º–µ–Ω—à–µ 1970' },
                { day: 15, month: 6, year: 2025, valid: false, desc: '–†—ñ–∫ –±—ñ–ª—å—à–µ 2024' },
                { day: 32, month: 13, year: 3000, valid: false, desc: '–í—Å—ñ –∑–Ω–∞—á–µ–Ω–Ω—è –Ω–µ–∫–æ—Ä–µ–∫—Ç–Ω—ñ' }
            ];
            
            let passed = 0;
            let failed = 0;
            
            testCases.forEach((testCase, index) => {
                setTimeout(() => {
                    try {
                        loadTestCase(testCase.day, testCase.month, testCase.year);
                        
                        if (testCase.valid && currentDay) {
                            passed++;
                        } else if (!testCase.valid && exceptionHistory.length > 0) {
                            passed++;
                        } else {
                            failed++;
                        }
                        
                        if (index === testCases.length - 1) {
                            setTimeout(() => {
                                alert(`–¢–µ—Å—Ç–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–æ!\n–ü—Ä–æ–π–¥–µ–Ω–æ: ${passed}\n–ù–µ –ø—Ä–æ–π–¥–µ–Ω–æ: ${failed}`);
                            }, 500);
                        }
                    } catch (error) {
                        failed++;
                    }
                }, index * 500);
            });
        }
        
        function updateExceptionHistory() {
            const historyContainer = document.getElementById('exceptionHistory');
            let html = '';
            
            if (exceptionHistory.length === 0) {
                html = '<p style="color: #666; text-align: center;">–Ü—Å—Ç–æ—Ä—ñ—è –ø–æ—Ä–æ–∂–Ω—è</p>';
            } else {
                exceptionHistory.forEach(exception => {
                    html += `
                        <div class="exception-item">
                            <div class="exception-time">${exception.timestamp}</div>
                            <div class="exception-text">${exception.type}: ${exception.message}</div>
                            <div style="font-size: 12px; color: #666;">–î–µ–Ω—å=${exception.day}, –ú—ñ—Å—è—Ü—å=${exception.month}, –†—ñ–∫=${exception.year}</div>
                        </div>
                    `;
                });
            }
            
            historyContainer.innerHTML = html;
        }
        
        function resetHints() {
            ['dayHint', 'monthHint', 'yearHint'].forEach(id => {
                const element = document.getElementById(id);
                element.textContent = '';
            });
            
            ['dayInput', 'monthInput', 'yearInput'].forEach(id => {
                const element = document.getElementById(id);
                element.classList.remove('valid', 'invalid');
            });
        }
        
        function resetAll() {
            document.getElementById('dayInput').value = '15';
            document.getElementById('monthInput').value = '6';
            document.getElementById('yearInput').value = '2023';
            
            document.getElementById('errorSection').style.display = 'none';
            document.getElementById('resultSection').style.display = 'none';
            
            resetHints();
            
            exceptionHistory = [];
            updateExceptionHistory();
            
            currentDay = null;
            
            alert('–í—Å—ñ –¥–∞–Ω—ñ —Å–∫–∏–Ω—É—Ç–æ –¥–æ –ø–æ—á–∞—Ç–∫–æ–≤–æ–≥–æ —Å—Ç–∞–Ω—É!');
        }
        
        window.onload = function() {
            createDate();
            
            ['dayInput', 'monthInput', 'yearInput'].forEach(id => {
                document.getElementById(id).addEventListener('input', function() {
                    this.classList.remove('valid', 'invalid');
                    const hintId = id.replace('Input', 'Hint');
                    document.getElementById(hintId).textContent = '';
                });
            });
            
            document.addEventListener('keydown', function(event) {
                if (event.ctrlKey && event.key === 'Enter') {
                    event.preventDefault();
                    createDate();
                }
                if (event.ctrlKey && event.key === 'r') {
                    event.preventDefault();
                    resetAll();
                }
                if (event.ctrlKey && event.key === 't') {
                    event.preventDefault();
                    runTestCases();
                }
            });
        };
    </script>
</body>
</html>
